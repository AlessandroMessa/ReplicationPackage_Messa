Ristrutturazione architetturale per la rimozione dello smell Unstable Dependency
Nel corso dell’analisi architetturale del modulo product-server, lo strumento Arcan ha rilevato la presenza di uno smell di tipo Unstable Dependency localizzato inizialmente all’interno del package com.mtcarpenter.mall.portal.product.service.home.content. Tale smell si manifestava in quanto la classe HomeContentServiceImpl mostrava un'elevata instabilità, dovuta alla dipendenza diretta da numerosi moduli esterni instabili (mapper MyBatis, client Feign, oggetti dominio eterogenei).

Per affrontare il problema, è stata condotta una rifattorizzazione strutturata in più fasi, ispirata ai principi SRP (Single Responsibility Principle), Stable Dependency Principle (SDP) e Clean Architecture:

Separazione delle responsabilità
L’interfaccia HomeContentService è stata suddivisa in più interfacce specializzate (contenuti, prodotti, subject) al fine di isolare semanticamente le responsabilità e ridurre il coupling interno.

Introduzione di Provider (facade locali)
È stata introdotta una serie di componenti intermedi (PromotionProvider, RecommendationProvider, BannerProvider) incaricati di aggregare i dati da client esterni e DAO, rimuovendo così le dipendenze dirette da HomeContentServiceImpl.

Modularizzazione selettiva tramite estrazione dei provider
Si è deciso di non spostare i provider nel modulo product-common per evitare dipendenze cicliche, ma di isolarli in un nuovo modulo indipendente denominato product-provider, dipendente solo da product-common. Questo ha permesso di mantenere una struttura coerente e riusabile senza introdurre fragilità architetturali.

Allineamento alle metriche architetturali
Dopo il refactoring, l’analisi Arcan ha confermato la rimozione completa dello smell. Il nuovo grafo delle dipendenze mostra una topologia più modulare e stabile, con i provider collocati in un modulo autonomo con dipendenze mirate, e product-server che si comporta come un consumer puro.